# Daily Report 日报系统 - 产品需求文档

## 1. 产品概述

### 1.1 产品定位
Daily Report 是一款面向团队的日报管理系统，帮助团队成员高效汇报工作进展，负责人便捷查看汇总，管理员统一管理项目和权限。

### 1.2 目标用户
- **成员**：日常提交日报，查看个人汇总
- **负责人**：管理团队日报，查看项目/人员汇总
- **管理员**：全系统管理，包括成员、项目、权限

---

## 2. 功能模块

### 2.1 概览仪表盘

#### 2.1.1 核心功能
- **实时统计卡片**
  - 总日报数（累计提交日报总数）
  - 活跃项目（进行中项目数量）
  - 团队成员（系统成员总数）
  - 今日日报（今日已提交日报数）

- **近7天日报统计图表**
  - 柱状图/折线图展示近7天日报提交趋势
  - X轴：日期（近7天）
  - Y轴：日报数量

- **今日日报列表**
  - 展示今日已提交的日报摘要
  - 显示提交人、所属项目、提交时间

- **未提交日报提醒**
  - 列表展示今日未提交日报的成员
  - 仅负责人/管理员可见

#### 2.1.2 权限控制
| 角色 | 可见内容 |
|------|----------|
| 成员 | 自己的统计数据、今日日报列表（全员） |
| 负责人 | 全部统计数据、未提交提醒 |
| 管理员 | 全部统计数据、未提交提醒 |

---

### 2.2 写日报

#### 2.2.1 核心功能
- **项目选择**
  - 下拉选择参与的项目（多选）
  - 仅显示该成员参与的项目

- **快速模板**
  - 常规工作日：标准日报格式
  - 忙碌工作日：侧重已完成内容
  - 轻松工作日：简洁格式

- **日报内容**
  - 已完成（今日完成的工作）
  - 进行中（正在进行的任务）
  - 遇到的问题（阻塞或需要帮助的事项）
  - 明日计划（明天的工作安排）

- **覆盖提交**
  - 当日已提交日报时，再次提交自动覆盖
  - 显示上次提交时间

#### 2.2.2 权限控制
| 角色 | 权限 |
|------|------|
| 成员 | 可写自己的日报 |
| 负责人 | 可写自己的日报 |
| 管理员 | 可写自己的日报 |

---

### 2.3 汇总查看

#### 2.3.1 核心功能
- **三种视图模式**
  - 按项目查看：展示各项目的日报汇总
  - 按人员查看：展示各成员的日报历史
  - 按日期查看：日历/列表形式展示每日日报

- **多维度筛选**
  - 项目筛选：选择特定项目
  - 成员筛选：选择特定成员
  - 日期范围：起止日期选择
  - 关键词搜索：搜索日报内容

- **日报详情**
  - 点击日报卡片弹出详情弹窗
  - 完整展示：提交人、项目、时间、四项内容

#### 2.3.2 权限控制
| 角色 | 权限 |
|------|------|
| 成员 | 仅查看自己的汇总 |
| 负责人 | 查看全部成员的汇总 |
| 管理员 | 查看全部成员的汇总 |

---

### 2.4 项目管理

#### 2.4.1 核心功能
- **项目CRUD**
  - 创建：项目名称、描述、颜色、成员
  - 编辑：修改项目信息
  - 归档：项目完成后归档（保留数据，不可新增日报）
  - 删除：彻底删除项目及相关数据

- **项目设置**
  - 项目颜色：用于UI区分（10种预设颜色）
  - 项目成员：添加/移除参与成员

- **项目统计**
  - 日报总数
  - 成员数量
  - 成员头像列表

#### 2.4.2 权限控制
| 角色 | 权限 |
|------|------|
| 成员 | 无权限 |
| 负责人 | 全部项目管理权限 |
| 管理员 | 全部项目管理权限 |

---

### 2.5 成员管理

#### 2.5.1 核心功能
- **成员CRUD**
  - 添加：姓名、部门、角色、账号
  - 编辑：修改成员信息
  - 删除：移除成员（需确认）

- **角色设置**
  - 管理员：全系统权限
  - 负责人：除成员管理外的全部权限
  - 成员：仅概览和写日报

- **成员统计**
  - 参与项目数
  - 提交日报总数
  - 最近提交时间

#### 2.5.2 权限控制
| 角色 | 权限 |
|------|------|
| 成员 | 无权限 |
| 负责人 | 无权限 |
| 管理员 | 全部成员管理权限 |

---

## 3. 角色权限体系

### 3.1 权限矩阵

| 功能模块 | 成员 | 负责人 | 管理员 |
|----------|------|--------|--------|
| 概览仪表盘 | 部分可见 | 全部可见 | 全部可见 |
| 写日报 | 自己的日报 | 自己的日报 | 自己的日报 |
| 汇总查看 | 仅自己 | 全部 | 全部 |
| 项目管理 | - | 全部 | 全部 |
| 成员管理 | - | - | 全部 |

### 3.2 角色定义

- **成员**：普通团队成员，负责提交日报和查看个人汇总
- **负责人**：部门/项目负责人，管理团队日报和项目
- **管理员**：系统超级管理员，拥有所有管理权限

---

## 4. 默认测试数据

### 4.1 预设用户

| 姓名 | 角色 | 部门 | 用途 |
|------|------|------|------|
| 张三 | 负责人 | 技术部 | 测试负责人权限 |
| 李四 | 成员 | 技术部 | 测试成员权限 |
| 王五 | 成员 | 产品部 | 测试成员权限 |
| 赵六 | 成员 | 设计部 | 测试成员权限 |
| 孙七 | 管理员 | 管理层 | 测试管理员权限 |

### 4.2 登录方式
- 登录页面提供用户选择器
- 选择任意用户即可进入系统体验对应权限

---

## 5. 设计规范

### 5.1 视觉风格
- **主题**：黑白极简风格
- **圆角**：大圆角设计（16px-24px）
- **卡片**：卡片式布局，阴影层次

### 5.2 交互效果
- **鼠标移动**：元素hover动效（轻微上浮、阴影加深）
- **页面切换**：平滑过渡动画
- **按钮交互**：点击反馈、加载状态

### 5.3 导航结构
- **顶部导航栏（Nav）**
  - Logo/系统名称
  - 主导航：概览、写日报、汇总、项目、成员
  - 用户头像/切换用户

### 5.4 技术栈
- **框架**：React 18+
- **构建工具**：Vite
- **UI组件**：@radix-ui
- **图标**：lucide-react
- **样式**：CSS Modules / Tailwind CSS（待定）

---

## 6. 页面结构

### 6.1 页面清单

| 页面 | 路径 | 说明 |
|------|------|------|
| 登录页 | /login | 用户选择器登录 |
| 概览页 | /dashboard | 仪表盘首页 |
| 写日报 | /report/new | 日报编辑页 |
| 汇总查看 | /summary | 汇总列表页 |
| 项目管理 | /projects | 项目列表与管理 |
| 成员管理 | /members | 成员列表与管理 |

### 6.2 路由权限

| 页面 | 成员 | 负责人 | 管理员 |
|------|------|--------|--------|
| /login | 允许 | 允许 | 允许 |
| /dashboard | 允许 | 允许 | 允许 |
| /report/new | 允许 | 允许 | 允许 |
| /summary | 仅自己数据 | 允许 | 允许 |
| /projects | 禁止 | 允许 | 允许 |
| /members | 禁止 | 禁止 | 允许 |

---

## 7. 数据模型

### 7.1 用户（User）
```typescript
interface User {
  id: string;
  name: string;
  department: string;
  role: 'member' | 'lead' | 'admin';
  avatar?: string;
  createdAt: Date;
}
```

### 7.2 项目（Project）
```typescript
interface Project {
  id: string;
  name: string;
  description: string;
  color: string;
  members: string[]; // user ids
  status: 'active' | 'archived';
  createdAt: Date;
}
```

### 7.3 日报（DailyReport）
```typescript
interface DailyReport {
  id: string;
  userId: string;
  projectIds: string[];
  date: Date;
  completed: string;
  inProgress: string;
  problems: string;
  tomorrowPlan: string;
  createdAt: Date;
  updatedAt: Date;
}
```

---

## 8. 非功能性需求

### 8.1 性能要求
- 首屏加载 < 2s
- 页面切换 < 500ms
- 数据加载使用骨架屏

### 8.2 兼容性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 8.3 响应式
- 桌面端优先（1200px+）
- 适配平板（768px-1199px）
- 基础移动端适配（<768px）

---

## 9. 开发计划

### 9.1 第一阶段 - 基础功能
- [ ] 项目初始化与架构搭建
- [ ] 登录页与用户切换
- [ ] 概览仪表盘
- [ ] 写日报功能

### 9.2 第二阶段 - 核心功能
- [ ] 汇总查看（三种视图）
- [ ] 项目管理
- [ ] 权限控制实现

### 9.3 第三阶段 - 完善优化
- [ ] 成员管理
- [ ] 动画效果优化
- [ ] 测试与Bug修复

---

## 10. 附录

### 10.1 术语表
- **日报**：每日工作汇报
- **汇总**：多份日报的聚合查看
- **归档**：项目状态变为已完成，保留但只读

### 10.2 变更记录
| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| v1.0 | 2026-02-11 | 初始版本 | - |
